/* Hidden elements */
#titlebar-buttonbox-container,
#zen-expand-sidebar-button,
#zen-sidepanel-button,
#back-button,
#forward-button,
#star-button-box,
#reader-mode-button,
#blocked-permissions-container,
#userContext-indicator,
#tabbrowser-arrowscrollbox-periphery,
#workspace-indicator,
.workspace-icon,
.workspace-label
{
  display: none !important;
}

.tab-icon-overlay {
  display: none !important;
}

/* URL bar styling */
#urlbar {
  width: 40vw !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  position: fixed !important;
  border-radius: 3px !important;
  transition: width 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), opacity 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

#urlbar:hover {
  opacity: 1 !important;
}

#urlbar:not(:hover):not([focused]) {
  opacity: 0.85 !important;
}

#urlbar-input-container {
  text-align: center !important;
  justify-content: center !important;
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

.urlbar-input-box {
  text-align: center !important;
  transition: color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

#urlbar-background {
  border: 1px solid #ffffff13 !important;
  border-radius: 3px !important;
  background-color: #161616 !important;
  transition: background-color 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
              border-color 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
              box-shadow 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

#urlbar[focused] > #urlbar-background {
  box-shadow: 0 0 0 2px rgba(58, 133, 255, 0.3) !important;
  transition: box-shadow 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

#urlbar:not([focused]) > #urlbar-background {
  background: transparent !important;
  transition: background 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

#identity-icon-box:not(:hover),
#identity-permission-box:not(:hover) {
  background-color: transparent !important;
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

#identity-icon-box:hover,
#identity-permission-box:hover {
  background-color: rgba(128, 128, 128, 0.2) !important;
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

/* Navigation and control elements */
#back-button {
  padding-left: 8px !important;
  transition: opacity 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

#userContext-label {
  color: var(--zen-primary-color) !important;
  transition: color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

#tracking-protection-icon-container {
  order: 3 !important;
  transition: opacity 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

#tracking-protection-icon-container:hover {
  opacity: 0.9 !important;
}

/* Sidebar elements */
#sidebar-box::before {
  content: "";
  display: block;
  height: 40px;
  width: 100%;
}

#zen-current-workspace-indicator {
  display: none !important;
}

#zen-current-workspace-indicator-container {
  display: none !important;
}

#zen-sidebar-top-buttons,
#zen-sidebar-top-buttons-customization-target {
  margin: 0px !important;
  transition: opacity 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

#downloads-button {
  order: 1 !important;
  transition: opacity 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

#downloads-button:hover {
  opacity: 0.9 !important;
}

#zen-profile-button {
  order: 2 !important;
  transition: opacity 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

#zen-profile-button:hover {
  opacity: 0.9 !important;
}

#zen-sidebar-bottom-buttons {
  margin-bottom: 4px !important;
  transition: opacity 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

#Zen-sidebar-splitter {
  opacity: 1 !important;
  border: none !important;
  min-width: 0 !important;
  width: 1px !important;
  height: 0.1% !important;
  transition: width 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
              height 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
              background-color 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

#navigator-toolbox:hover ~ #Zen-sidebar-splitter,
#Zen-sidebar-splitter:hover,
#Zen-sidebar-splitter:hover:active {
  width: 6px !important;
  height: 100% !important;
  background-color: rgba(128, 128, 128, 0.2) !important;
}

/* Tab styling */
.tab-background:is([selected], [multiselected]) {
  background-color: transparent !important;
  background-image: none !important;
  border: 1px solid var(--zen-colors-border) !important;
  border-radius: 3px !important;
  transition: border-color 1.2s cubic-bezier(0.16, 1, 0.3, 1), 
              background-color 1.2s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.tabbrowser-tab .tab-background {
  transition: background-color 1.2s cubic-bezier(0.16, 1, 0.3, 1), 
              border-color 1.2s cubic-bezier(0.16, 1, 0.3, 1), 
              box-shadow 1.2s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.tabbrowser-tab:hover .tab-background:not([selected]) {
  background-color: rgba(128, 128, 128, 0.1) !important;
}

#tabbrowser-tabs .tabbrowser-tab:not([pinned]):is([visuallyselected]):not(:hover) .tab-close-button {
  display: none !important;
  transition: opacity 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

.tabbrowser-tab .tab-close-button {
  opacity: 0;
  transition: opacity 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

.tabbrowser-tab:hover .tab-close-button {
  opacity: 1;
}

#tabbrowser-tabpanels {
  transition: opacity 1.5s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.browserContainer {
  transition: opacity 1.5s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

#sidebar-box .sidebar-panel {
  transition: opacity 1.5s cubic-bezier(0.16, 1, 0.3, 1),
              transform 1.5s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.tab-content {
  transition: opacity 1.2s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.tabbrowser-tab {
  transition: background-color 1.2s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.tabbrowser-tab[selected] {
  background-color: rgba(128, 128, 128, 0.15) !important;
  transition: background-color 1.2s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

browser {
  transition: opacity 1.5s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

#zen-sidebar-browser-tabs {
  transition: opacity 1.5s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

#zen-sidebar-top-buttons-container {
  transition: opacity 1.2s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

:root {
  --tab-transition-duration: 1.5s !important;
}

#browser {
  transition: opacity 1.5s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

#appcontent {
  transition: opacity 1.5s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

#TabsToolbar {
  transition: opacity 1.2s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

#tabbrowser-arrowscrollbox {
  transition: opacity 1.2s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.browserSidebarContainer {
  transition: opacity 1.5s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.webextension-browser-action {
  transition: opacity 1.2s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.browserContainer.loading {
  transition: opacity 1.5s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.browserContainer.findbar-container {
  transition: opacity 1.2s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.browserContainer.deck-selected {
  transition: opacity 1.5s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

/* Panel and status elements */
#tabbrowser-tabpanels[zen-split-view="true"] .browserSidebarContainer.deck-selected {
  outline: var(--zen-colors-border) !important;
  transition: outline 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

#statuspanel {
  margin: 6px !important;
  transition: opacity 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

#statuspanel-label {
  font-size: 12px !important;
  padding: 2px 10px !important;
  border-radius: 3px !important;
  border: 1.5px solid var(--zen-colors-border) !important;
  background: var(--zen-colors-tertiary) !important;
  transition: background 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
              border-color 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
              opacity 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

/* Background and window styling */
#navigator-toolbox {
  background-color: rgba(0, 0, 0, 0) !important;
  transition: background-color 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

#main-window {
  background-color: rgba(41, 47, 52, 0.2) !important;
  -moz-appearance: none !important;
  appearance: none !important;
  background-image: none !important;
  --zen-main-browser-background: rgba(0, 0, 0, 0.5) !important;
  transition: background-color 0.55s cubic-bezier(0.19, 1, 0.22, 1) !important;
}

/* Media queries */
@media (-moz-bool-pref: "zen.view.compact") {
  #tabbrowser-tabpanels {
    padding: 0 !important;
    transition: padding 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
  }

  #tabbrowser-tabpanels .browserSidebarContainer:not([zen-split="true"]) {
    --zen-webview-border-radius: 0 !important;
    --zen-element-separation: 0 !important;
    transition: all 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
  }
}

/* Document rules */
@-moz-document url-prefix("chrome:") {
  @media (-moz-bool-pref: "zen.view.compact") and (-moz-bool-pref: "zen.view.compact.hide-tabbar") {
    #navigator-toolbox {
      margin: auto !important;
      height: 75vh !important;
      transition: height 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
                  margin 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
    }
  }

  :root:not([customizing]) #back-button[disabled] {
    display: none !important;
    transition: opacity 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
  }

  :root:not([customizing]) #forward-button[disabled] {
    display: none !important;
    transition: opacity 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
  }

  .search-one-offs {
    display: none !important;
    transition: opacity 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
  }

  .search-one-offs:has(.searchbar-engine-one-off-item[selected]) {
    display: flex !important;
    transition: opacity 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
  }
}

/* CtrlTab panel styling */
#ctrlTab-panel {
  background: none !important;
  backdrop-filter: blur(5px) !important;
  border-radius: 3px !important;
  box-shadow: none !important;
  border: none !important;
  padding: 8px !important;
  transition: opacity 0.55s cubic-bezier(0.19, 1, 0.22, 1), 
              transform 0.55s cubic-bezier(0.19, 1, 0.22, 1) !important;
  transform-origin: center !important;
  -moz-window-dragging: no-drag !important;
}

#ctrlTab-panel > * {
  background: none !important;
}

#ctrlTab-panel .panel-arrowcontainer,
#ctrlTab-panel .panel-arrowcontent {
  background: none !important;
  border: none !important;
}

.ctrlTab-canvas {
  background-color: none !important;
  border-radius: 3px !important;
  transition: opacity 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
  filter: none !important;
}

.ctrlTab-canvas[selected="true"] {
  opacity: 1 !important;
  box-shadow: none !important;
  background-color: none !important;
}

.ctrlTab-canvas:hover {
  opacity: 0.9 !important;
}

.ctrlTab-label {
  background-color: none !important;
  color: white !important;
  padding: 2px 6px !important;
  margin-top: 3px !important;
  font-weight: 400 !important;
  transition: opacity 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

.ctrlTab-preview {
  background-color: none !important;
}

.ctrlTab-preview-inner {
  background: none !important;
}

.ctrlTab-preview-thumbnail {
  background-color: none !important;
}

#ctrlTab-panel .panel-arrowbox,
#ctrlTab-panel .panel-arrowcontent > *,
.ctrlTab-tabList,
.ctrlTab-tab,
.ctrlTab-preview-container,
.ctrlTab-preview-thumbnail,
.ctrlTab-preview-inner > *:not(img) {
  background-color: none !important;
}

.ctrlTab-favicon-container {
  display: none !important;
}

.ctrlTab-preview-inner > .ctrlTab-favicon {
  display: none !important;
}

#ctrlTab-panel[fadeout] {
  opacity: 1 !important;
  visibility: visible !important;
  transition: none !important;
}

#ctrlTab-panel:not([showing]) {
  visibility: visible !important;
  opacity: 1 !important;
}

/* Enhanced cursor animations */
:root {
  --cursor-default: default;
  --cursor-pointer: pointer;
  --cursor-text: text;
}

button,
.button,
.toolbarbutton-1,
.subviewbutton,
#TabsToolbar .tabs-newtab-button,
.urlbar-icon,
.panel-subview-body .subview-subheader {
  cursor: var(--cursor-pointer) !important;
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

button:hover,
.button:hover,
.toolbarbutton-1:hover,
.subviewbutton:hover {
  background-color: rgba(128, 128, 128, 0.2) !important;
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

button:active,
.button:active,
.toolbarbutton-1:active,
.subviewbutton:active {
  background-color: rgba(128, 128, 128, 0.3) !important;
  transition: background-color 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
}

input[type="text"],
input[type="search"],
input[type="url"],
textarea,
#urlbar-input,
.searchbar-textbox {
  cursor: var(--cursor-text) !important;
}

.tabbrowser-tab:hover {
  background-color: rgba(128, 128, 128, 0.1) !important;
}

.toolbarbutton-1:hover,
button:hover,
.button:hover,
.subviewbutton:hover {
  box-shadow: 0 0 8px 2px rgba(128, 128, 128, 0.2) !important;
  transition: box-shadow 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
              background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

/* Tab animations */
.tab-background {
  transition: background-color 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
              box-shadow 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
              background 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

.tab-group-label-container {
  transition: background-color 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
              box-shadow 0.45s cubic-bezier(0.215, 0.61, 0.355, 1), 
              background 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

/* Toolbar button animations */
.toolbarbutton-1 {
  &:hover > :is(.toolbarbutton-icon, .toolbarbutton-text, .toolbarbutton-badge-stack) {
    transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1), 
                outline-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important; 
  }
  
  > :is(.toolbarbutton-icon, .toolbarbutton-text, .toolbarbutton-badge-stack) {
    transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1), 
                outline-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
  }
}

.identity-box-button {
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1), 
              outline-color 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

/* URL bar controls animations */
#reader-mode-button, 
#star-button-box, 
#zen-split-views-box, 
#pageActionButton, 
#urlbar-zoom-button, 
#shopping-sidebar-button, 
#translations-button, 
#picture-in-picture-button, 
#page-action-buttons, 
#urlbar-go-button, 
#urlbar-revert-button-container {
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1), 
              outline-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

/* Tab function icons animations */
.close-icon {
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

.close-icon:hover {
  background-color: rgba(128, 128, 128, 0.2) !important;
}

.tab-reset-button {
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

.tab-reset-button:hover {
  background-color: rgba(128, 128, 128, 0.2) !important;
}

#tabs-newtab-button {
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

#tabs-newtab-button:hover {
  background-color: rgba(128, 128, 128, 0.2) !important;
}

/* Other UI element animations */
.subviewbutton {
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

.subviewbutton:hover {
  background-color: rgba(128, 128, 128, 0.2) !important;
}

.urlbarView-row-inner {
  transition: background-color 0.35s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

.urlbarView-row-inner:hover {
  background-color: rgba(128, 128, 128, 0.2) !important;
}

/* Improved scrollbar styling */
:root {
  scrollbar-width: auto !important;
  scrollbar-color: rgba(128, 128, 128, 0.096) transparent !important;
}

* {
  scrollbar-width: auto !important;
  scrollbar-color: rgba(128, 128, 128, 0.15) transparent !important;
}

@-moz-document url-prefix("") {
  * {
    scrollbar-width: auto !important;
    scrollbar-color: rgba(128, 128, 128, 0.15) transparent !important;
  }
  
  html, body {
    scrollbar-width: auto !important;
    scrollbar-color: rgba(128, 128, 128, 0.15) transparent !important;
  }
  
  div, section, article, aside, nav, main {
    scrollbar-width: auto !important;
    scrollbar-color: rgba(128, 128, 128, 0.15) transparent !important;
  }
}

::-webkit-scrollbar {
  width: 14px !important;
  height: 14px !important;
}

::-webkit-scrollbar-track {
  background: transparent !important;
}

::-webkit-scrollbar-thumb {
  background-color: rgba(128, 128, 128, 0.15) !important;
  border-radius: 3px !important;
  border: 3px solid transparent !important;
  background-clip: content-box !important;
  transition: background-color 0.45s cubic-bezier(0.215, 0.61, 0.355, 1) !important;
}

::-webkit-scrollbar-thumb:hover {
  background-color: rgba(128, 128, 128, 0.3) !important;
}

::-webkit-scrollbar-corner {
  background: transparent !important;
}

/* Border radius consistency */
#urlbar {
  border-radius: 3px !important;
}

#urlbar-background {
  border-radius: 3px !important;
}

.tab-background:is([selected], [multiselected]) {
  border-radius: 3px !important;
}

::-webkit-scrollbar-thumb {
  border-radius: 3px !important;
}

#statuspanel-label {
  border-radius: 3px !important;
}

button, 
.button, 
.toolbarbutton-1, 
.subviewbutton {
  border-radius: 3px !important;
}

.urlbarView-row-inner,
.panel-subview-body,
.panel-arrowcontent,
.urlbarView,
.findbar-container,
.findbar-textbox,
.findbar-find-previous,
.findbar-find-next,
.downloadProgress,
.menu-iconic-left,
.identity-popup-security-content,
.identity-popup-expander,
.search-panel-input,
.searchbar-textbox {
  border-radius: 3px !important;
}
